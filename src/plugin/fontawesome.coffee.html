<!DOCTYPE html>
<html>
<head>
  <title>fontawesome.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "src/plugin/fontawesome.coffee";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0" /></head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io"
  onmouseover="logo.src='https://alinex.github.io/images/Alinex-200.png'"
  onmouseout="logo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="logo" src="https://alinex.github.io/images/Alinex-black-200.png"
    width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png"
    style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog"
    class="btn btn-primary"><span class="glyphicon-pencil"></span> Blog</a>
  <a href="http://alinex.github.io/develop"
    class="btn btn-primary"><span class="glyphicon-book"></span> Develop</a>
  <a href="http://alinex.github.io/code.html"
    class="btn btn-warning"><span class="glyphicon-cog"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#plugin-to-add-graphics">Plugin to add graphics</a>
      </div>

      <div class="heading h2">
        <a href="#node-modules">Node Modules</a>
      </div>

      <div class="heading h2">
        <a href="#setup">Setup</a>
      </div>

      <div class="heading h2">
        <a href="#init-plugin-in-markdown-it">Init plugin in markdown-it</a>
      </div>

      <div class="heading h2">
        <a href="#convert-to-othher-formats">Convert to othher formats</a>
      </div>

      <div class="heading h2">
        <a href="#parser">Parser</a>
      </div>

      <div class="heading h2">
        <a href="#renderer">Renderer</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-report" title="Fork me on GitHub"></a>
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="plugin-to-add-graphics">
  <h1>
    <a href="#plugin-to-add-graphics" name="plugin-to-add-graphics" class="pilcrow"></a>
Plugin to add graphics
  </h1>
</div>

        </td>
        <td class="code highlight">
          
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="node-modules">
  <h2>
    <a href="#node-modules" name="node-modules" class="pilcrow"></a>
Node Modules
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">
debug = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>) <span class="hljs-string">'report:fontawesome'</span>
chalk = <span class="hljs-built_in">require</span> <span class="hljs-string">'chalk'</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>alinex modules</p>

        </td>
        <td class="code highlight">
          
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="setup">
  <h2>
    <a href="#setup" name="setup" class="pilcrow"></a>
Setup
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">
REGEXP = <span class="hljs-regexp">/^\:(fa-[\w\-]+(\s+(fa|text)-[\w\-]+)*)\:/</span>
TEXT_REMOVE = [
  <span class="hljs-string">'fa-lg'</span>, <span class="hljs-string">'fa-2x'</span>, <span class="hljs-string">'fa-3x'</span>, <span class="hljs-string">'fa-4x'</span>, <span class="hljs-string">'fa-5x'</span>
  <span class="hljs-string">'fa-pull-left'</span>, <span class="hljs-string">'fa-pull-right'</span>, <span class="hljs-string">'fa-border'</span>
  <span class="hljs-string">'fa-spin'</span>, <span class="hljs-string">'fa-fw'</span>
  <span class="hljs-string">'fa-stack'</span>, <span class="hljs-string">'fa-stack-1x'</span>, <span class="hljs-string">'fa-stack-2x'</span>
  <span class="hljs-string">'fa-flip-horizontal'</span>, <span class="hljs-string">'fa-flip-vertical'</span>
  <span class="hljs-string">'fa-rotate-90'</span>, <span class="hljs-string">'fa-rotate-180'</span>, <span class="hljs-string">'fa-rotate-270'</span>
  <span class="hljs-string">'fa-inverse'</span>
]</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="init-plugin-in-markdown-it">
  <h2>
    <a href="#init-plugin-in-markdown-it" name="init-plugin-in-markdown-it" class="pilcrow"></a>
Init plugin in markdown-it
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">(md)</span> -&gt;</span>
  debug <span class="hljs-string">"Init plugin..."</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>add parser rules</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  md.inline.ruler.push <span class="hljs-string">'fontawesome'</span>, parser</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>add render rules</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  md.renderer.rules.fontawesome = renderer</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="convert-to-othher-formats">
  <h2>
    <a href="#convert-to-othher-formats" name="convert-to-othher-formats" class="pilcrow"></a>
Convert to othher formats
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript"><span class="hljs-built_in">module</span>.exports.toText = <span class="hljs-function"><span class="hljs-params">(text)</span> -&gt;</span>
  text.replace <span class="hljs-regexp">/\:(fa-[\w\-]+(\s+(fa|text)-[\w\-]+)*)\:/g</span>, <span class="hljs-function"><span class="hljs-params">(match, def)</span> -&gt;</span>
    parts = def.split <span class="hljs-regexp">/\s/</span>
    text = parts.filter (e) -&gt;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> e.match <span class="hljs-regexp">/^text-/</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> e <span class="hljs-keyword">in</span> TEXT_REMOVE
      <span class="hljs-literal">true</span>
    .map (e) -&gt; e[<span class="hljs-number">3.</span>.]
    .join <span class="hljs-string">' '</span>
    <span class="hljs-string">"&lt;<span class="hljs-subst">#{text}</span>&gt;"</span>

<span class="hljs-built_in">module</span>.exports.toConsole = <span class="hljs-function"><span class="hljs-params">(text)</span> -&gt;</span>
  text.replace <span class="hljs-regexp">/\:(fa-[\w\-]+(\s+(fa|text)-[\w\-]+)*)\:/g</span>, <span class="hljs-function"><span class="hljs-params">(match, def)</span> -&gt;</span>
    parts = def.split <span class="hljs-regexp">/\s/</span>
    text = parts.filter (e) -&gt;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> e.match <span class="hljs-regexp">/^text-/</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> e <span class="hljs-keyword">in</span> TEXT_REMOVE
      <span class="hljs-literal">true</span>
    .map (e) -&gt; e[<span class="hljs-number">3.</span>.]
    .join <span class="hljs-string">' '</span>
    text = <span class="hljs-string">"&lt;<span class="hljs-subst">#{text}</span>&gt;"</span>
    color = def.match(<span class="hljs-regexp">/(?:^|\s)text-(red|green|yellow|blue|magenta|cyan|gray)(?:\s|$)/</span>)?[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> color <span class="hljs-keyword">then</span> chalk[color] text <span class="hljs-keyword">else</span> text</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="parser">
  <h2>
    <a href="#parser" name="parser" class="pilcrow"></a>
Parser
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript"><span class="hljs-function">
<span class="hljs-title">parser</span> = <span class="hljs-params">(state, startLine, endLine, silent)</span> -&gt;</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>slowwww... maybe use an advanced regexp engine for this</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  match = state.src.slice(state.pos).match REGEXP
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">unless</span> match</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>valid match found, now we need to advance cursor</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  state.pos += match[<span class="hljs-number">0</span>].length</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>don't insert any tokens in silent mode</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> silent
  token = state.push <span class="hljs-string">'fontawesome'</span>, <span class="hljs-string">''</span>, <span class="hljs-number">0</span>
  token.meta =
    match: match
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="renderer">
  <h2>
    <a href="#renderer" name="renderer" class="pilcrow"></a>
Renderer
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript"><span class="hljs-function">
<span class="hljs-title">renderer</span> = <span class="hljs-params">(tokens, id)</span> -&gt;</span>
  names = tokens[id].meta.match[<span class="hljs-number">1</span>].split <span class="hljs-regexp">/(?:^|\s)(?=fa-stack)/</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;i class="fa '</span> + tokens[id].meta.match[<span class="hljs-number">1</span>] + <span class="hljs-string">'"&gt;&lt;/i&gt;'</span> <span class="hljs-keyword">if</span> names.length <span class="hljs-keyword">is</span> <span class="hljs-number">1</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>make stacked icons</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  html = <span class="hljs-string">"""&lt;span class="fa-stack <span class="hljs-subst">#{names[<span class="hljs-number">0</span>]}</span>"&gt;"""</span>
  html += <span class="hljs-string">"""&lt;i class="fa <span class="hljs-subst">#{e}</span>"&gt;&lt;/i&gt;"""</span> <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> names[<span class="hljs-number">1.</span>.]
  html + <span class="hljs-string">"&lt;/span&gt;"</span></pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
